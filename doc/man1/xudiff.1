.\" Process this file with 
.\" groff -man -Tascii xudiff.1
.\"
.TH XUDIFF 1 "June 2013" XUTools "User Manuals"
.SH NAME 
xudiff \- Compare two files in terms of parse trees generated by a context-free or regular grammar

.SH SYNOPSIS
.B xudiff
.B [
.I --cost_fn
.B ]
.I xupath
.I file1
.I file2

.SH DESCRIPTION
xudiff(1) generalizes 
.BR diff(1) 
to compare files in terms of their
respective parse trees generated by a context-free or regular
grammar.  

Traditional 
.BR diff(1) 
computes an edit script between the sequences of
lines in a file.  
.BR diff(1) 
outputs an edit script that describes how to
transform the sequence of lines in the first file into the sequence of
lines in the second file via a sequence of edit operations (insert,
delete, update).  

The xupath specifies the grammar by which to parse both files.
Currently, our tools expect an input xupath that results in a single
parse tree (not a forest).

The files are processed in the order specified.  

.SH OPTIONS 
.IP --cost_fn
The function that should be used to compute the cost function in the
dynamic programming matrix.  By default, inserts and deletes of
parse-tree nodes cost 1.  Updates of nodes with the same label cost 0
and otherwise 1.  However, one could also calculate cost in terms of
edit distance between labels in terms of bytes, characters, or words.
For larger files, this may be slow due to the size of the dynamic
programming matrix.  Likewise, 'bigger chunks' such as paragraphs, may
be faster than comparing lines.

.SH FILES

.SH ENVIRONMENT

.SH DIAGNOSTICS
Currently there are no error codes.  In future releases, however, we
will be thinking more carefully about error codes and how to report
these errors back to the calling environment.

.SH BUGS
There are likely plenty so please report bugs.  We want to make these tools
as strong as possible.

.SH EXAMPLES

.SS Cisco IOS
.P
.B xudiff \(dq//ios:config\(dq ./data/test/cisco_ios/router.v1.example ./data/test/cisco_ios/router.v2.example | egrep \(dqios:config\(dq 
.br 
Compare the two versions of the router files parsed according to the
Cisco IOS grammar in terms of the total number of lines changed.  This
example shows how we can pipe the output of xudiff into 
.BR egrep(1) 
to only output the total number of changes (4 lines) between both
documents' parse trees.

.P
.B xudiff \(dq//ios:config\(dq ./data/test/cisco_ios/router.v1.example ./data/test/cisco_ios/router.v2.example | egrep \(dqios:interface\(dq
.br
Compare the two versions of the router files parsed according to the
Cisco IOS grammar in terms of the number of lines changed.  This
example shows how we can pipe the output of xudiff into 
.BR egrep(1) 
to only output the total number of changes between the Cisco IOS
interfaces within those documents (2 lines per interface).

.P
.B xudiff \(dq//ios:config\(dq ./data/test/cisco_ios/router.v1.example ./data/test/cisco_ios/router.v2.example
.br
Compare the two versions of the router files parsed according to the
Cisco IOS grammar in terms of the number of lines changed.  Show the
entire edit script.

.P
.B xudiff --cost_fn=word_edist_cost \(dq//ios:config\(dq ./data/test/cisco_ios/router.v1.example ./data/test/cisco_ios/router.v2.example | egrep \(dq\\ios:interface\(dq
.br
Compare the two versions of the router files parsed according to the
Cisco IOS grammar in terms of words changed.  Show the total number of
words changed within both interfaces.

.P
.B xudiff --cost_fn=char_edist_cost \(dq//ios:config\(dq ./data/test/cisco_ios/router.v1.example ./data/test/cisco_ios/router.v2.example | awk '$3 < 5 {print $0;}' | awk '$3 > 0 {print $0;}'
.br
Compare the two versions of the router files parsed according to the
Cisco IOS grammar in terms of characters changed between the two
versions of the configuration file.  We pipe the output of xudiff 
into 
.BR awk(1) 
to obtain all lines in the edit script that had between 1 and 4
(inclusive) character changes between versions.

.SH AUTHOR
Gabriel A. Weaver <gabriel.a.l.weaver AT gmail DOT com>

.SH SEE ALSO
.BR diff(1),
.BR xugrep(1),
.BR xupath(1),
.BR xuwc(1)

